<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Rosmin与Rossum | 11zHexo</title>
  <meta name="author" content="E. Sununs">
  
  <meta name="description" content="Rossum demo:



Rosmin demo:



Rosmin
项目地址：https://code.google.com/p/wtfrobot-rosmin/


相关文章：


Google ADK与arduino 开发环境搭建


Android下PocketSphinx的离线语音识别


Rosmin--OpenCV Color Blob Tracker on Android


Rosmin--两台Android手机的Socket双向通信


Rosmin--在Android上绘制小车行进路线图并标记


Rosmin--折腾USB Host Shield的日子


Rosmin机器人是我们去年（2012年）制作的一个使用Arduino驱动的小型移动机器人，连接上Android手机，可以完成手机控制的基本运动，追踪乒乓球，以QR码为人工路标移动到指定区域，搜寻目标，视频监控等等。


硬件结构：">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Rosmin与Rossum"/>
  <meta property="og:site_name" content="11zHexo"/>

  <link rel="alternate" href="/atom.xml" title="11zHexo" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-31707826-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>

<body>
  <header id="header" class="inner"><div class="alignleft">
  <!--<h1><a href="/">11zHexo</a></h1>-->

  <div id="contenedor">
  <ul class="cube">
    <li class="cara"></li>
    <li class="cara"></li>
    <li class="cara"></li>
    <li class="cara"></li>
    <li class="cara"></li>
	  <li class="cara">
      <iframe src="/imgs/logo.svg" width="100px" height="100px" frameborder="no">
      </iframe>
    </li>
  </ul>
</div>

<script type="text/javascript">
	$(function(){
		var cube = $('.cube'),
				offset = $('#contenedor').offset(),
				offsetleft = (offset.left + 50),
				offsettop = (offset.top + 50);

		cube.on({
			mousemove: function(e) {
				$(this).css('transform','rotateX(' + (e.pageY - offsettop)*0.618 + 'deg) rotateY(' + (e.pageX - offsetleft)*0.618 + 'deg)');
				$(this).addClass('noanimar').removeClass('animar');
			},
			mouseout: function() {
				$(this).css('transform','rotateX(0deg) rotateY(0deg)');
				$(this).addClass('animar').removeClass('noanimar');
			}
		});
		//console.log('x=' + offsetleft + ', y=' + offsettop);
});
</script>
<script src="/js/prefixfree.min.js"></script>

</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <a href="/"><li>Home</li></a>
    
      <a href="/archives"><li>Archives</li></a>
    
      <a href="/atom.xml"><li>RSS</li></a>
    
  </ul>
  <div class="clearfix"></div>
</nav>


<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">

<article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-08-10T11:45:02.000Z">Aug 10 2013</time>
      
      
  
    <h1 class="title">Rosmin与Rossum</h1>
  

    </header>
    <div class="entry">
      
        <p>Rossum demo:
</p>
<embed src="http://player.youku.com/player.php/sid/XNTY0MTUwMTMy/v.swf" allowFullScreen="true" quality="high" width="480" height="400" align="middle" allowScriptAccess="always" type="application/x-shockwave-flash"></embed>

<p>Rosmin demo:
</p>
<embed src="http://player.youku.com/player.php/sid/XNDg2OTMzNDEy/v.swf" allowFullScreen="true" quality="high" width="480" height="400" align="middle" allowScriptAccess="always" type="application/x-shockwave-flash"></embed>

<h3>Rosmin</h3>
<p>项目地址：<a href="https://code.google.com/p/wtfrobot-rosmin/">https://code.google.com/p/wtfrobot-rosmin/</a>

</p>
<p>相关文章：

</p>
<p><a href="http://blog.csdn.net/wtfrobot/article/details/8029640/">Google ADK与arduino 开发环境搭建</a>

</p>
<p><a href="http://blog.csdn.net/wtfrobot/article/details/8034640/">Android下PocketSphinx的离线语音识别</a>

</p>
<p><a href="http://blog.csdn.net/wtfrobot/article/details/9173609/">Rosmin--OpenCV Color Blob Tracker on Android</a>

</p>
<p><a href="http://blog.csdn.net/wtfrobot/article/details/9173619/">Rosmin--两台Android手机的Socket双向通信</a>

</p>
<p><a href="http://blog.csdn.net/wtfrobot/article/details/9173631/">Rosmin--在Android上绘制小车行进路线图并标记</a>

</p>
<p><a href="http://blog.csdn.net/wtfrobot/article/details/9173643/">Rosmin--折腾USB Host Shield的日子</a>

</p>
<p>Rosmin机器人是我们去年（2012年）制作的一个使用Arduino驱动的小型移动机器人，连接上Android手机，可以完成手机控制的基本运动，追踪乒乓球，以QR码为人工路标移动到指定区域，搜寻目标，视频监控等等。

</p>
<p>硬件结构：
<img src="http://11zpic-11zpic.stor.sinaapp.com/original/54389a22c578eb6789380abdc70ea156.png" alt="">

</p>
<span id="more"></span>

<p>软件结构：
<img src="http://11zpic-11zpic.stor.sinaapp.com/original/fa93e566fdba33847d86c97c66e9f6fa.png" alt="">

</p>
<ul>
<li><p>图像处理</p>
<p>利用Android版OpenCV的ColorBlobTrack，控制舵机追踪乒乓球一类有明显颜色特征的物体。</p>
</li>
<li><p>语音识别</p>
<p>利用CMU Sphinx语音库实现的小范围离线语音识别，识别速度、准确度都还不错，而且是离线的，不需要连接网络。</p>
</li>
<li><p>Google ADK Mega2560</p>
<p>使用Google ADK Mega2560 通过USB线与Android手机相连，让小车由小车上搭载的手机运行的服务端程序控制，另外另一台Android设备通过WiFi连接到小车上的手机作为客户端可对小车远程控制。</p>
</li>
<li><p>陀螺仪</p>
</li>
</ul>
<p>用陀螺仪的角加速度信息计算出角度，综合手机发出的控制命令绘制小车运行轨迹。

</p>
<p>实现的功能有：

</p>
<ol>
<li><p>基本运动：用Android设备控制小车完成基本运动，可以用控制界面的按钮和语音来操控。如前进，后退，停止，左转，右转，车身左转90度，车身右转90度，舵机云台的转动等。</p>
</li>
<li><p>追踪乒乓球： 由小车上的Android手机做图像处理获取小球坐标，通过Arduino控制舵机对正小球。根据小球偏离中心位置的距离调整运动速度。详见这篇：<a href="http://blog.csdn.net/wtfrobot/article/details/9173609/">Rosmin--OpenCV Color Blob Tracker on Android</a>
<img src="http://11zpic-11zpic.stor.sinaapp.com/original/c15d2ab7157f666de39873659dd37697.jpg" alt=""></p>
</li>
<li><p>以QR码为人工路标的导航： 我们设计了一个以QR码作为人工路标的导航策略，根据超声波传感器检测拐角，利用QR码提供的信息和陀螺仪传感器的信息运动到指定区域。会有一篇水论文，不过现在还没发出来。
<img src="http://11zpic-11zpic.stor.sinaapp.com/original/ec1c60fcbc07f0773511641604bce72e.png" alt=""></p>
</li>
<li><p>绘制运动轨迹： 我们利用Android上的Google Maps控件做了一个绘制小车运动轨迹的程序，由小车上手机陀螺仪获取角加速度，计算出角度。不知是我们算法不行还是手机加速度计不够精确，用加速度计算出的里程误差太大根本用不了。于是我们就给小车一个恒定的速度，综合控制命令的信息（比如前进后退停止）来绘制轨迹。在客户端可以显示出小车的运行轨迹，还有QR码路标和目标的位置。详见这篇：<a href="http://blog.csdn.net/f_season/article/details/9171523">在Android上绘制小车行进路线图并标记</a>
<img src="http://11zpic-11zpic.stor.sinaapp.com/original/2685dfa7f0443ccf12d4a01a1c3b2568.jpeg" alt=""></p>
</li>
<li><p>寻找目标： 不断转动寻找目标，发现目标以后就向目标前进。根据目标区域面积判断是否足够靠近，足够靠近了就认为到达了目标自动停止。关于怎么检测目标和计算目标区域面积仍然在：<a href="http://blog.csdn.net/sununs11/article/details/8034294">Rosmin--OpenCV Color Blob Tracker on Android</a>
<img src="http://11zpic-11zpic.stor.sinaapp.com/original/6d604c137f34654f216066332f1245e0.jpg" alt=""></p>
</li>
<li><p>视频监控： 用手机的WiFi Camera应用即可，可以通过PC端的Web界面控制。
<img src="http://11zpic-11zpic.stor.sinaapp.com/original/2eb1613837654cb598482f7b495cc4ee.jpg" alt=""></p>
</li>
</ol>
<h3>Rossum</h3>
<p>项目地址：<a href="https://code.google.com/p/wtfrobot-rossum/">https://code.google.com/p/wtfrobot-rossum/</a>

</p>
<p>相关文章： 

</p>
<p><a href="http://blog.csdn.net/wtfrobot/article/details/9173633/">Rossum--Android上ROS开发介绍与安装简介</a>

</p>
<p><a href="http://blog.csdn.net/wtfrobot/article/details/9881749/">Rossum--PID与里程计</a>

</p>
<p><a href="http://blog.csdn.net/wtfrobot/article/details/9881771/">Rossum--slam</a>

</p>
<p><a href="http://blog.csdn.net/wtfrobot/article/details/9881815/">Rossum--Android上ROS开发——android_core创建一个android应用</a>

</p>
<p><a href="http://blog.csdn.net/wtfrobot/article/details/9881859/">Rossum--ROSjava-android控制ROS机器人</a>

</p>
<p><a href="http://blog.csdn.net/wtfrobot/article/details/9881889/">Rossum--ROSjava的消息发送</a>

</p>
<p><a href="http://blog.csdn.net/wtfrobot/article/details/9881965/">Rossum--tpofinder 平面纹理物体识别</a>


</p>
<p>Rossum是我们以ROS机器人操作系统为核心做的一个自主导航机器人，名字来自于《罗萨姆的万能机器人( Rossum&#39;s Universal Robots)》里的Rossum一词。使用 Kinect 传感器模拟激光测距仪,Arduino 控制器驱动电机控制机器人运动,Atom上网本置于机器人内作为主要的处理设备。
<img src="http://11zpic-11zpic.stor.sinaapp.com/original/7239941384c0d7713355636d212b0035.png" alt="">

</p>
<p>实现的功能：

</p>
<ol>
<li><p>基本运动控制： 机器人运动模式为轮式运动,由两个驱动轮驱动机器人运
动,一个万向轮辅助,采用 PI 反馈,闭环控制机器人速度,可以精确平滑
的控制机器人的运动,同时利用编码器获取的数据,由运动学模型推算机
器人的当前坐标系位姿。</p>
</li>
<li><p>语音控制： 通过 Android 手机发送语音控制机器人运动,可进行离线英文
语音识别(和Rosmin相同)，在线中文语音识别(讯飞)。</p>
</li>
<li><p>跟随运动： 即turtlebot_follower，使机器人与人保持一定距离并正对人体,当人转向或移动时,机器人相应跟随人体转向和移动。</p>
</li>
<li><p>同时定位与地图构建(SLAM)： 移动机器人在未知环境中依靠传感器获取
的信息进行环境建模,同时利用所创建的环境地图估计其本身的位姿。</p>
</li>
<li><p>自主导航： 在构建出静态地图的基础上,实现机器人从一个位置运动到地
图上的另一个指定位置。</p>
</li>
<li><p>物体识别： 利用tpofinder,实现识别有纹理特征的物体,如书本封面,咖啡盒等，识别后用TTS发声，通过舵机云台对准物体。详见：<a href="http://blog.csdn.net/sununs11/article/details/9180085">Rossum--tpofinder 平面纹理物体识别</a></p>
</li>
</ol>
<p>最开始确定方案的时候我们找到了<a href="http://www.hessmer.org/blog/2011/04/10/2d-slam-with-ros-and-kinect/">Dr. Rainer Hessmer的一篇文章</a>,它是用Kinect来模拟激光测距仪来做SLAM的，里程计只靠电机上的编码器。他的博客上讲得非常详细，Arduino的介绍，Kinect模拟激光测距仪，惯性导航，SLAM和路径规划的参数这些全都有。当时我们啥都不懂，就把他的博客打印出来一篇一篇地看。

</p>
<p>由于时间很紧，而且在机器人功能还没完全实现前就要写各种文档，我们真正用在这个机器人身上的开发时间很少，甚至可能不如Rosmin，但这个项目却是准备时间最长的，从一开始接触ROS，Android编程，Python，长时间犹豫不决地选购底盘，到后来的调试SLAM耗时有半年，调试SLAM和导航实际时间也就一个多月。

</p>
<p>一开始我还想在ARM上实现它。那个时候ROS的网站上还没有Ubuntu ARM的源，但是刚刚发布ROS Groovy，把构建工具由rosbuild改成了catkin，还给出了详细的编译步骤。于是我就照着步骤编译了一下，<a href="http://www.sun11.me/blog/ros-on-arm--native-compile-ros-on-rk3066/">核心包比较顺利地编译成功了</a>。不过现在即使官方网站有源了，除了核心的库外，其它比较上层的包多数都没有构建成功。用它来做难度太大，而且性能不太好，于是我还是放弃了。图个方便不想遇到驱动问题，而且那时侯我们时间也比较紧了，所以没用mini-itx主板什么的，直接用了10寸的Atom上网本。至于底盘，在ROS的qq群里刚好发现有人出售专门用于ROS的机器人底盘<a href="http://boomrangrobot.sinaapp.com/">Boomerang</a>，于是我们就直接买了，包括它整个亚克力板的外壳和两个带编码器的电机、轮子。

</p>
<p>虽然我们找到了这么详细的教程，不过要适配上我们的机器人硬件仍然有很多麻烦。Dr. Rainer Hessmer使用的ros版本是electric，而我们要用fuerte，有一些代码要改，比如参数的双引号什么的。还有一些包被废弃了，改名了，要把launch文件改一下。还有Kinect放置的位置和轮子的距离参数之类的，里程计的调试耗费了最长时间。但是编码器精确度有限，到最后里程计也还是很不准的。在我们视频里可以发现，其实机器人的位置估计是很不准的，万幸的是可以用SLAM算法纠正过来，在SLAM建图的时候注意对准拐角，建出的地图勉强可用，我们还可以用GIMP或者其它图片编辑工具小小滴修正一下，用来导航效果还行。SLAM的参数我们一开始尝试调过，不过后来觉得调整的意义不大，因为Dr. Rainer Hessmer做的已经很好了，我们效果没他的好主要原因应该是里程计。关于PID和里程计：<a href="http://blog.csdn.net/xiaoqiaoaidianzi/article/details/9179809/">http://blog.csdn.net/xiaoqiaoaidianzi/article/details/9179809/</a>,slam:<a href="http://blog.csdn.net/xiaoqiaoaidianzi/article/details/9190829/">http://blog.csdn.net/xiaoqiaoaidianzi/article/details/9190829/</a>

</p>
<p>地图手工修正前后对比：
<img src="http://11zpic-11zpic.stor.sinaapp.com/original/1aeabdfde10505cca6a2d87994b19dcf.png" alt="">

</p>
<p>最后，其实我开始想实现的远远不止这些，我还想用OpenCV的blob检测来绘制出空中乒乓球的运动轨迹，利用运动轨迹做一些有意思的事情，让机器人具有简单的“认知”，还有三维的rgbd-slam，还有PCL的三维物体识别，还有利用语音识别让机器人完成一些有逻辑的任务，可惜时间远远比我们预料的少，遇到的问题远远比我们预料的多，我们的精力也有限，仍然有一些遗憾吧，现在我们WTFRobot团队的三人都已经加入考研大军了。

</p>
<p><img src="http://11zpic-11zpic.stor.sinaapp.com/original/0123ae700d696feab9ee6379956a1512.jpg" alt="">

</p>
<p><img src="http://11zpic-11zpic.stor.sinaapp.com/original/a26081e9e8c6b4a7f6a87984574eac06.jpg" alt=""></p>

      
    </div>
    <footer>
      
        
        
  
  <div class="tags">
    <a href="/tags/Robot/">Robot</a>
  </div>

        
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js"></script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">Comments</h1>
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</div></div>
    <aside id="sidebar" class="alignright">
<div class="search">
  <form action="http://google.com/search" method="get" accept-charset="utf-8">
    <input type="text" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:sun11.me">
  </form>
</div>




<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <a href="/tags/ARM/"><li>ARM<small>4</small></li></a>
  
    <a href="/tags/Android/"><li>Android<small>4</small></li></a>
  
    <a href="/tags/Customize/"><li>Customize<small>1</small></li></a>
  
    <a href="/tags/Embedded-Linux/"><li>Embedded Linux<small>4</small></li></a>
  
    <a href="/tags/Face-Recognition/"><li>Face Recognition<small>1</small></li></a>
  
    <a href="/tags/Linux/"><li>Linux<small>4</small></li></a>
  
    <a href="/tags/OCR/"><li>OCR<small>1</small></li></a>
  
    <a href="/tags/OpenCV/"><li>OpenCV<small>3</small></li></a>
  
    <a href="/tags/OpenWrt/"><li>OpenWrt<small>1</small></li></a>
  
    <a href="/tags/Qt/"><li>Qt<small>1</small></li></a>
  
    <a href="/tags/ROS/"><li>ROS<small>1</small></li></a>
  
    <a href="/tags/Robot/"><li>Robot<small>5</small></li></a>
  
    <a href="/tags/Ubuntu/"><li>Ubuntu<small>4</small></li></a>
  
    <a href="/tags/Web/"><li>Web<small>1</small></li></a>
  
  </ul>
</div>



</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2013 E. Sununs
  
  <br />
  Powered by <a href="http://zespia.tw/hexo/">Hexo</a>
</div>
<div class="alignright license">
<img alt="知识共享许可协议" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /> 本站作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.zh">知识共享署名-非商业性使用-相同方式共享 3.0 未本地化版本许可协议</a>进行许可。
</div>
<div class="clearfix"></div>
</footer>
  <script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
var disqus_shortname = '11zhexo';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>